<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>我推 - My Favorite</title>
    <!-- 引入Font Awesome图标库 -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- 引入Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- 自定义样式 -->
    <style>
        /* 平滑滚动 */
        html {
            scroll-behavior: smooth;
        }
        
        /* 自定义滚动条样式 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }
        
        /* 卡片悬停效果 */
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        }
        
        /* 按钮动画 */
        .btn-hover {
            transition: all 0.2s ease;
        }
        
        .btn-hover:hover {
            transform: translateY(-1px);
        }
        
        /* 统计卡片动画 */
        .stat-card {
            transition: all 0.3s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        /* 导航链接动画 */
        .nav-link {
            transition: all 0.2s ease;
        }
        
        /* 进度条动画 */
        #progress-bar {
            transition: width 0.5s ease;
        }
        
        /* 加载动画 */
        @keyframes spin {
            from {
                transform: rotate(0deg);
            }
            to {
                transform: rotate(360deg);
            }
        }
        
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
    <!-- Tailwind 配置 -->
    <script>
        // Tailwind 配置
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    colors: {
                        primary: '#3B82F6',
                        secondary: '#60A5FA',
                        accent: '#818CF8',
                        success: '#10B981',
                        warning: '#F59E0B',
                        danger: '#EF4444',
                        info: '#3B82F6',
                        dark: {
                            primary: '#60A5FA',
                            secondary: '#3B82F6',
                            background: '#1F2937',
                            card: '#374151',
                            border: '#4B5563',
                            text: '#F9FAFB'
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'card': '0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06)',
                        'card-hover': '0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05)',
                    },
                    borderRadius: {
                        'card': '0.75rem',
                        'button': '0.5rem',
                    }
                },
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .scrollbar-hide {
                -ms-overflow-style: none;
                scrollbar-width: none;
            }
            .scrollbar-hide::-webkit-scrollbar {
                display: none;
            }
            .sidebar-shadow {
                box-shadow: 0 0 15px rgba(0, 0, 0, 0.07);
            }
            .transition-all-300 {
                transition: all 0.3s ease;
            }
            .hover-scale {
                transition: transform 0.2s ease;
            }
            .hover-scale:hover {
                transform: scale(1.02);
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 text-gray-800 dark:text-gray-100 min-h-screen flex flex-col transition-all duration-300">
    <!-- 顶部导航栏 -->
    <header class="fixed top-0 left-0 right-0 z-50 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm shadow-md transition-all duration-300">
        <div class="container mx-auto px-4 flex items-center justify-between h-16">
            <div class="flex items-center space-x-3">
                <img src="/static/icons/logo.svg" alt="Logo" class="h-9 w-9 rounded-lg shadow-md transition-all duration-300 hover:scale-110">
                <h1 class="text-2xl font-bold bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent drop-shadow-sm">我推 - My Favorite</h1>
            </div>
            <div class="flex items-center space-x-5">
                <button id="theme-toggle" class="p-2.5 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 transform hover:scale-110 hover:shadow-md">
                    <i class="fa fa-moon-o dark:hidden text-gray-600 dark:text-gray-300 text-lg"></i>
                    <i class="fa fa-sun-o hidden dark:block text-yellow-400 text-lg"></i>
                </button>
                <div class="relative flex items-center space-x-2 bg-gray-100 dark:bg-gray-700/50 px-3 py-1.5 rounded-full shadow-inner">
                    <span id="status-indicator" class="inline-block w-3.5 h-3.5 bg-gray-300 dark:bg-gray-600 rounded-full animate-pulse transition-all duration-500"></span>
                    <span id="status-text" class="text-sm font-medium text-gray-600 dark:text-gray-300">未运行</span>
                </div>
            </div>
        </div>
    </header>

    <!-- 主要内容 -->
    <div class="flex pt-16 min-h-screen">
        <!-- 左侧导航栏 -->
        <aside id="sidebar" class="fixed left-0 top-16 bottom-0 w-64 bg-white/95 dark:bg-gray-800/95 backdrop-blur-sm sidebar-shadow overflow-y-auto scrollbar-hide transition-all duration-300 transform z-40">
            <nav class="py-6 px-4">
                <ul class="space-y-1">
                    <li>
                        <a href="#photo-wall" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-th-large text-lg"></i>
                            <span>照片墙</span>
                        </a>
                    </li>
                    <li>
                        <a href="#dashboard" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg bg-primary/10 text-primary dark:bg-primary/20 dark:text-primary font-medium shadow-sm">
                            <i class="fa fa-dashboard text-lg"></i>
                            <span>仪表盘</span>
                        </a>
                    </li>
                    <li>
                        <a href="#config" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-cog text-lg"></i>
                            <span>配置管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#tasks" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-tasks text-lg"></i>
                            <span>任务执行</span>
                        </a>
                    </li>
                    <li>
                        <a href="#results" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-folder-open text-lg"></i>
                            <span>结果管理</span>
                        </a>
                    </li>
                    <li>
                        <a href="#logs" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-file-text text-lg"></i>
                            <span>日志查看</span>
                        </a>
                    </li>
                    <li>
                        <a href="#about" class="nav-link flex items-center space-x-3 px-4 py-3 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-all transform hover:translate-x-1">
                            <i class="fa fa-info-circle text-lg"></i>
                            <span>关于</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </aside>

        <!-- 右侧内容区 -->
        <main class="flex-1 ml-64 transition-all duration-300 p-6">
            <!-- 照片墙区域 -->
            <section id="photo-wall" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <div class="flex flex-wrap justify-between items-center mb-6 gap-4">
                        <h2 class="text-2xl font-bold bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">照片墙</h2>
                        <div class="flex items-center space-x-2">
                            <button id="toggle-photo-controls" class="p-2 rounded-full hover:bg-primary/10 dark:hover:bg-primary/20 transition-all duration-300 transform hover:scale-110 hover:shadow-md">
                                <i class="fa fa-sliders text-gray-600 dark:text-gray-300"></i>
                            </button>
                            <span class="text-sm text-gray-500 dark:text-gray-400" id="photo-count">0 张图片</span>
                        </div>
                    </div>
                    
                    <!-- 控制栏 -->
                    <div id="photo-controls" class="mb-6 p-4 bg-gray-50 dark:bg-gray-700/50 rounded-lg">
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <!-- 显示数量设置 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">每页显示数量</label>
                                <div class="flex space-x-2">
                                    <select id="photo-page-size" class="flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg">
                                        <option value="12">12</option>
                                        <option value="24" selected>24</option>
                                        <option value="36">36</option>
                                        <option value="48">48</option>
                                        <option value="60">60</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- 布局模式设置 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">布局模式</label>
                                <div class="flex space-x-2">
                                    <button id="layout-grid" class="flex-1 px-4 py-3 bg-primary text-white rounded-lg hover:shadow-lg transition-all btn-hover flex items-center justify-center">
                                        <i class="fa fa-th mr-2"></i>网格
                                    </button>
                                    <button id="layout-masonry" class="flex-1 px-4 py-3 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:shadow-lg transition-all btn-hover flex items-center justify-center">
                                        <i class="fa fa-th-large mr-2"></i>瀑布流
                                    </button>
                                </div>
                            </div>
                            
                            <!-- 批量操作 -->
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">批量操作</label>
                                <div class="flex space-x-2">
                                    <button id="batch-delete-photos" class="flex-1 px-4 py-3 bg-gradient-to-r from-danger to-red-500 text-white rounded-lg hover:shadow-lg transition-all btn-hover flex items-center justify-center" disabled>
                                        <i class="fa fa-trash mr-2"></i>删除 (0)
                                    </button>
                                    <button id="clear-photo-wall" class="flex-1 px-4 py-3 bg-gradient-to-r from-warning to-yellow-500 text-white rounded-lg hover:shadow-lg transition-all btn-hover flex items-center justify-center" disabled>
                                        <i class="fa fa-refresh mr-2"></i>清空
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 照片墙内容 -->
                    <div class="mb-6">
                        <!-- 全选和分页信息 -->
                        <div class="flex flex-wrap justify-between items-center mb-4 gap-2">
                            <div class="flex items-center space-x-2">
                                <input type="checkbox" id="select-all-photos" class="rounded text-primary focus:ring-primary/50">
                                <label for="select-all-photos" class="text-sm text-gray-700 dark:text-gray-300">全选</label>
                                <span class="text-sm text-gray-500 dark:text-gray-400" id="selected-photo-count">(0 / 0)</span>
                            </div>
                            <div class="text-sm text-gray-500 dark:text-gray-400">
                                第 <span id="current-photo-page">1</span> / <span id="total-photo-pages">1</span> 页
                            </div>
                        </div>
                        
                        <!-- 照片墙网格 -->
                        <div id="photo-grid" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                            <!-- 照片将在这里动态生成 -->
                            <div class="col-span-full text-center py-12 text-gray-500 dark:text-gray-400">
                                <i class="fa fa-picture-o text-4xl mb-3"></i>
                                <h3 class="text-lg font-semibold mb-2">照片墙为空</h3>
                                <p>从结果管理页面选择图片添加到照片墙</p>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 分页控件 -->
                    <div id="photo-pagination" class="flex justify-center items-center space-x-2" style="display: none;">
                        <button id="prev-photo-page" class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors" disabled>
                            <i class="fa fa-chevron-left mr-2"></i>上一页
                        </button>
                        <span class="text-sm text-gray-700 dark:text-gray-300">
                            第 <span id="pagination-current">1</span> / <span id="pagination-total">1</span> 页
                        </span>
                        <button id="next-photo-page" class="px-4 py-2 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors" disabled>
                            下一页 <i class="fa fa-chevron-right ml-2"></i>
                        </button>
                    </div>
                </div>
            </section>
            
            <!-- 仪表盘区域 -->
            <section id="dashboard" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">仪表盘</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                        <div class="stat-card bg-gradient-to-br from-blue-50 to-blue-100 dark:from-blue-900/30 dark:to-blue-800/30 p-5 rounded-xl shadow-sm">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-300 text-sm">已爬取用户</p>
                                    <h3 class="text-2xl font-bold mt-1 text-blue-600 dark:text-blue-400" id="user-count">0</h3>
                                </div>
                                <div class="p-3 bg-blue-100 dark:bg-blue-900/50 rounded-full">
                                    <i class="fa fa-users text-blue-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-gradient-to-br from-green-50 to-green-100 dark:from-green-900/30 dark:to-green-800/30 p-5 rounded-xl shadow-sm">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-300 text-sm">已爬取微博</p>
                                    <h3 class="text-2xl font-bold mt-1 text-green-600 dark:text-green-400" id="weibo-count">0</h3>
                                </div>
                                <div class="p-3 bg-green-100 dark:bg-green-900/50 rounded-full">
                                    <i class="fa fa-comment text-green-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-gradient-to-br from-purple-50 to-purple-100 dark:from-purple-900/30 dark:to-purple-800/30 p-5 rounded-xl shadow-sm">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-300 text-sm">已下载文件</p>
                                    <h3 class="text-2xl font-bold mt-1 text-purple-600 dark:text-purple-400" id="file-count">0</h3>
                                </div>
                                <div class="p-3 bg-purple-100 dark:bg-purple-900/50 rounded-full">
                                    <i class="fa fa-download text-purple-500"></i>
                                </div>
                            </div>
                        </div>
                        <div class="stat-card bg-gradient-to-br from-orange-50 to-orange-100 dark:from-orange-900/30 dark:to-orange-800/30 p-5 rounded-xl shadow-sm">
                            <div class="flex justify-between items-start">
                                <div>
                                    <p class="text-gray-600 dark:text-gray-300 text-sm">任务成功率</p>
                                    <h3 class="text-2xl font-bold mt-1 text-orange-600 dark:text-orange-400" id="success-rate">0%</h3>
                                </div>
                                <div class="p-3 bg-orange-100 dark:bg-orange-900/50 rounded-full">
                                    <i class="fa fa-line-chart text-orange-500"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-xl shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">爬取趋势</h3>
                            <div class="h-64">
                                <canvas id="crawl-chart"></canvas>
                            </div>
                        </div>
                        <div class="bg-gray-50 dark:bg-gray-700/50 p-5 rounded-xl shadow-sm">
                            <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">最近爬取的用户</h3>
                            <div class="overflow-y-auto h-64 scrollbar-hide">
                                <table class="w-full">
                                    <thead>
                                        <tr class="border-b border-gray-200 dark:border-gray-700">
                                            <th class="text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-300">用户</th>
                                            <th class="text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-300">微博数</th>
                                            <th class="text-left py-2 text-sm font-medium text-gray-600 dark:text-gray-300">状态</th>
                                        </tr>
                                    </thead>
                                    <tbody id="recent-users">
                                        <tr>
                                            <td colspan="3" class="text-center py-8 text-gray-500 dark:text-gray-400">暂无数据</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 配置管理区域 -->
            <section id="config" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">配置管理</h2>
                    <div class="mb-8">
                        <div class="flex justify-between items-center mb-4">
                            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">基本配置</h3>
                            <button id="save-config" class="px-4 py-2 bg-gradient-to-r from-primary to-accent text-white rounded-lg hover:shadow-lg transition-all btn-hover">
                                <i class="fa fa-save mr-2"></i>保存配置
                            </button>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">用户ID列表</label>
                                <textarea id="user-id-list" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg"></textarea>
                                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">也可以输入user_id_list.txt文件路径</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">搜索关键词列表</label>
                                <textarea id="query-list" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg"></textarea>
                                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">设置后将按关键词搜索微博</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">爬取模式</label>
                                <select id="only-crawl-original" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg">
                                    <option value="0">爬取全部微博</option>
                                    <option value="1">仅爬取原创微博</option>
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">起始日期</label>
                                <div class="flex space-x-2">
                                    <input type="number" id="since-date-days" class="flex-1 px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="天数">
                                    <span class="flex items-center text-gray-500">天前</span>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">文件存储（可多选）</label>
                                <div class="grid grid-cols-2 gap-2 mb-4">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="write-csv" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">CSV</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="write-json" class="rounded text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">JSON</span>
                                    </label>
                                </div>
                                
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">数据库存储（单选）</label>
                                <div class="grid grid-cols-3 gap-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="database" id="db-sqlite" class="rounded-full text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">SQLite</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="database" id="db-mysql" class="rounded-full text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">MySQL</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="database" id="db-mongodb" class="rounded-full text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">MongoDB</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">下载选项</h3>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">图片下载</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="original-pic" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">原创微博图片</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="retweet-pic" class="rounded text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">转发微博图片</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">视频下载</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="original-video" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">原创微博视频</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="retweet-video" class="rounded text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">转发微博视频</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">评论与转发</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="download-comment" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">下载评论</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="download-repost" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">下载转发</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">高级配置</h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <div class="flex items-center justify-between mb-2">
                                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300">Cookie</label>
                                    <button 
                                        id="get-cookie-btn" 
                                        class="px-3 py-1 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm font-medium shadow-sm"
                                        onclick="showCookieStepsModal()"
                                    >
                                        <i class="fa fa-question-circle mr-1"></i>获取步骤
                                    </button>
                                </div>
                                <textarea id="cookie" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg"></textarea>
                                <p class="mt-1 text-xs text-gray-500 dark:text-gray-400">点击按钮自动获取微博Cookie，无需手动复制</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">其他选项</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="remove-html-tag" class="rounded text-primary focus:ring-primary/50" checked>
                                        <span class="text-gray-700 dark:text-gray-300">移除HTML标签</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="checkbox" id="user-id-as-folder" class="rounded text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">使用用户ID作为文件夹名</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-8" id="mysql-config">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">MySQL配置 <span class="text-xs text-gray-500 dark:text-gray-400">(可选)</span></h3>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" id="enable-mysql" class="rounded text-primary focus:ring-primary/50">
                                <span class="text-gray-700 dark:text-gray-300">启用MySQL</span>
                            </label>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">主机</label>
                                <input type="text" id="mysql-host" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="localhost">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">端口</label>
                                <input type="number" id="mysql-port" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="3306" value="3306">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">用户名</label>
                                <input type="text" id="mysql-user" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="root">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">密码</label>
                                <input type="password" id="mysql-password" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="password">
                            </div>
                            <div class="md:col-span-2 lg:col-span-4">
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">字符集</label>
                                <input type="text" id="mysql-charset" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="utf8mb4" value="utf8mb4">
                            </div>
                        </div>
                    </div>

                    <div class="mb-8" id="mongodb-config">
                        <div class="flex items-center justify-between mb-4">
                            <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200">MongoDB配置 <span class="text-xs text-gray-500 dark:text-gray-400">(可选)</span></h3>
                            <label class="flex items-center space-x-2">
                                <input type="checkbox" id="enable-mongodb" class="rounded text-primary focus:ring-primary/50">
                                <span class="text-gray-700 dark:text-gray-300">启用MongoDB</span>
                            </label>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">MongoDB URI</label>
                            <input type="text" id="mongodb-uri" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="mongodb://[username:password@]host[:port][/[defaultauthdb][?options]]">
                        </div>
                    </div>

                    <div class="mb-8">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">定期自动爬取设置 <span class="text-xs text-gray-500 dark:text-gray-400">(可选)</span></h3>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">自动爬取频率</label>
                                <div class="space-y-2">
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="schedule-frequency" value="hourly" class="text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">每小时</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="schedule-frequency" value="daily" class="text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">每天</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="schedule-frequency" value="weekly" class="text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">每周</span>
                                    </label>
                                    <label class="flex items-center space-x-2">
                                        <input type="radio" name="schedule-frequency" value="custom" class="text-primary focus:ring-primary/50">
                                        <span class="text-gray-700 dark:text-gray-300">自定义</span>
                                    </label>
                                </div>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">自定义间隔（分钟）</label>
                                <input type="number" id="custom-interval" class="w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="60" value="60">
                                <label class="flex items-center space-x-2 mt-4">
                                    <input type="checkbox" id="enable-schedule" class="rounded text-primary focus:ring-primary/50">
                                    <span class="text-gray-700 dark:text-gray-300">启用定期自动爬取</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- 任务执行区域 -->
            <section id="tasks" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">任务执行</h2>
                    <div class="mb-6">
                        <div class="flex flex-col sm:flex-row gap-4">
                            <button id="start-task" class="px-6 py-3 bg-gradient-to-r from-success to-green-500 text-white rounded-lg hover:shadow-lg transition-all btn-hover flex-1 flex items-center justify-center">
                                <i class="fa fa-play mr-2"></i>开始爬取
                            </button>
                            <button id="stop-task" class="px-6 py-3 bg-gradient-to-r from-danger to-red-500 text-white rounded-lg hover:shadow-lg transition-all btn-hover flex-1 flex items-center justify-center" disabled>
                                <i class="fa fa-stop mr-2"></i>停止爬取
                            </button>
                        </div>
                    </div>
                    
                    <div class="mb-6">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">任务进度</h3>
                        <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4 mb-2 overflow-hidden">
                            <div id="progress-bar" class="bg-gradient-to-r from-primary to-accent h-4 rounded-full transition-all duration-500" style="width: 0%"></div>
                        </div>
                        <div class="flex justify-between text-sm text-gray-600 dark:text-gray-300">
                            <span id="progress-text">0%</span>
                            <span id="progress-status">准备就绪</span>
                        </div>
                    </div>

                    <div>
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">任务日志</h3>
                        <div id="task-log" class="w-full h-64 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 p-4 overflow-y-auto text-sm font-mono shadow-inner"></div>
                    </div>
                </div>
            </section>

            <!-- 结果管理区域 -->
            <section id="results" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">结果管理</h2>
                    <div class="flex justify-between items-center mb-4">
                        <div class="relative">
                            <input type="text" id="search-results" class="pl-10 pr-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg" placeholder="搜索结果...">
                            <i class="fa fa-search absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"></i>
                        </div>
                        <button id="refresh-results" class="px-4 py-2 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:shadow-lg transition-all btn-hover">
                            <i class="fa fa-refresh mr-2"></i>刷新
                        </button>
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead>
                                <tr class="border-b border-gray-200 dark:border-gray-700">
                                    <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-200">用户</th>
                                    <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-200">微博数</th>
                                    <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-200">文件数</th>
                                    <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-200">最后更新</th>
                                    <th class="text-left py-3 px-4 font-semibold text-gray-700 dark:text-gray-200">操作</th>
                                </tr>
                            </thead>
                            <tbody id="results-table">
                                <tr>
                                    <td colspan="5" class="text-center py-8 text-gray-500 dark:text-gray-400">暂无数据</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </section>

            <!-- 日志查看区域 -->
            <section id="logs" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">日志查看</h2>
                    <div class="flex justify-between items-center mb-4">
                        <select id="log-level" class="px-4 py-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 focus:ring-2 focus:ring-primary/50 focus:border-primary outline-none transition-all focus:shadow-lg">
                            <option value="all">全部</option>
                            <option value="info">信息</option>
                            <option value="warning">警告</option>
                            <option value="error">错误</option>
                        </select>
                        <button id="clear-logs" class="px-4 py-2 bg-gradient-to-r from-gray-200 to-gray-300 dark:from-gray-700 dark:to-gray-600 text-gray-800 dark:text-gray-200 rounded-lg hover:shadow-lg transition-all btn-hover">
                            <i class="fa fa-trash mr-2"></i>清空
                        </button>
                    </div>
                    <div id="logs-content" class="w-full h-96 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700/50 p-4 overflow-y-auto text-sm font-mono shadow-inner"></div>
                </div>
            </section>

            <!-- 关于区域 -->
            <section id="about" class="mb-12">
                <div class="bg-white dark:bg-gray-800 rounded-xl shadow-card p-6 card-hover">
                    <h2 class="text-2xl font-bold mb-6 bg-gradient-to-r from-primary to-accent bg-clip-text text-transparent">关于</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">我推 - My Favorite</h3>
                            <p class="text-gray-600 dark:text-gray-300 mb-4">这是一个功能强大的微博爬虫可视化工具，可以帮助您轻松爬取微博用户数据。</p>
                            <ul class="space-y-2 text-gray-600 dark:text-gray-300">
                                <li class="flex items-center"><i class="fa fa-check text-success mr-2"></i>支持多用户同时爬取</li>
                                <li class="flex items-center"><i class="fa fa-check text-success mr-2"></i>支持多种数据格式导出</li>
                                <li class="flex items-center"><i class="fa fa-check text-success mr-2"></i>支持图片、视频下载</li>
                                <li class="flex items-center"><i class="fa fa-check text-success mr-2"></i>支持评论、转发爬取</li>
                            </ul>
                        </div>
                        <div>
                            <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">使用说明</h3>
                            <ol class="list-decimal list-inside space-y-2 text-gray-600 dark:text-gray-300">
                                <li>在配置管理中设置爬取参数</li>
                                <li>点击保存配置按钮</li>
                                <li>在任务执行中点击开始爬取</li>
                                <li>查看爬取进度和日志</li>
                                <li>在结果管理中查看和下载爬取结果</li>
                            </ol>
                        </div>
                    </div>
                    
                    <div class="mt-8 pt-6 border-t border-gray-200 dark:border-gray-700">
                        <h3 class="text-lg font-semibold mb-4 text-gray-700 dark:text-gray-200">技术栈</h3>
                        <div class="flex flex-wrap gap-4">
                            <div class="bg-blue-50 dark:bg-blue-900/30 px-4 py-2 rounded-full">
                                <span class="text-blue-600 dark:text-blue-400 font-medium">Vue 3</span>
                            </div>
                            <div class="bg-green-50 dark:bg-green-900/30 px-4 py-2 rounded-full">
                                <span class="text-green-600 dark:text-green-400 font-medium">Vite</span>
                            </div>
                            <div class="bg-purple-50 dark:bg-purple-900/30 px-4 py-2 rounded-full">
                                <span class="text-purple-600 dark:text-purple-400 font-medium">Tailwind CSS</span>
                            </div>
                            <div class="bg-yellow-50 dark:bg-yellow-900/30 px-4 py-2 rounded-full">
                                <span class="text-yellow-600 dark:text-yellow-400 font-medium">Chart.js</span>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- 文件预览模态框 -->
    <div id="file-modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center hidden backdrop-blur-sm">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl w-full max-w-4xl max-h-[90vh] overflow-hidden animate-fadeIn">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h3 class="text-lg font-semibold text-gray-700 dark:text-gray-200" id="modal-title">文件预览</h3>
                <button id="close-modal" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-all transform hover:scale-110">
                    <i class="fa fa-times text-gray-600 dark:text-gray-300"></i>
                </button>
            </div>
            <div class="p-4 overflow-y-auto max-h-[calc(90vh-100px)]" id="modal-content">
                <!-- 模态框内容将在这里动态生成 -->
            </div>
        </div>
    </div>

    <script>
        // 初始化主题
        if (localStorage.getItem('theme') === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }

        // 主题切换
        document.getElementById('theme-toggle').addEventListener('click', () => {
            if (document.documentElement.classList.contains('dark')) {
                document.documentElement.classList.remove('dark');
                localStorage.setItem('theme', 'light');
            } else {
                document.documentElement.classList.add('dark');
                localStorage.setItem('theme', 'dark');
            }
        });

        // 设置导航链接高亮
        function setActiveNavLink() {
            // 获取当前URL的哈希值
            const hash = window.location.hash || '#dashboard';
            
            // 移除所有高亮
            document.querySelectorAll('.nav-link').forEach(el => {
                el.classList.remove('bg-primary/10', 'text-primary', 'dark:bg-primary/20', 'dark:text-primary', 'font-medium', 'shadow-sm');
                el.classList.add('hover:bg-gray-100', 'dark:hover:bg-gray-700');
            });
            
            // 添加当前高亮
            const activeLink = document.querySelector(`.nav-link[href="${hash}"]`);
            if (activeLink) {
                activeLink.classList.add('bg-primary/10', 'text-primary', 'dark:bg-primary/20', 'dark:text-primary', 'font-medium', 'shadow-sm');
                activeLink.classList.remove('hover:bg-gray-100', 'dark:hover:bg-gray-700');
            }
            
            // 隐藏所有内容区域
            document.querySelectorAll('main > section').forEach(section => {
                section.style.display = 'none';
            });
            
            // 显示对应的内容区域
            const targetId = hash.substring(1); // 移除 # 符号
            const targetElement = document.getElementById(targetId);
            if (targetElement) {
                targetElement.style.display = 'block';
            }
        }
        
        // 导航链接高亮和内容显示控制
        document.querySelectorAll('.nav-link').forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // 更新URL哈希
                window.location.hash = this.getAttribute('href');
            });
        });
        
        // 监听哈希变化事件
        window.addEventListener('hashchange', setActiveNavLink);
        
        // 页面初始加载时设置高亮
        document.addEventListener('DOMContentLoaded', setActiveNavLink);

        // 移除Chart.js相关代码，避免ReferenceError
        // 可以根据需要添加其他图表库或简化图表实现

        // 简单的模拟数据加载函数
        function loadMockData() {
            // 模拟数据
            document.getElementById('user-count').textContent = '42';
            document.getElementById('weibo-count').textContent = '1,256';
            document.getElementById('file-count').textContent = '58';
            document.getElementById('success-rate').textContent = '98%';
            
            const recentUsersHtml = `
                <tr class="border-b border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4"><div class="flex items-center"><div class="w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center mr-2"><i class="fa fa-user text-blue-500"></i></div> 迪丽热巴</div></td>
                    <td class="py-3 px-4">128</td>
                    <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 rounded-full text-xs">成功</span></td>
                </tr>
                <tr class="border-b border-gray-200 dark:border-gray-700">
                    <td class="py-3 px-4"><div class="flex items-center"><div class="w-6 h-6 rounded-full bg-pink-100 dark:bg-pink-900/50 flex items-center justify-center mr-2"><i class="fa fa-user text-pink-500"></i></div> 郭碧婷</div></td>
                    <td class="py-3 px-4">85</td>
                    <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 rounded-full text-xs">成功</span></td>
                </tr>
                <tr>
                    <td class="py-3 px-4"><div class="flex items-center"><div class="w-6 h-6 rounded-full bg-purple-100 dark:bg-purple-900/50 flex items-center justify-center mr-2"><i class="fa fa-user text-purple-500"></i></div> 杨幂</div></td>
                    <td class="py-3 px-4">156</td>
                    <td class="py-3 px-4"><span class="px-2 py-1 bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-100 rounded-full text-xs">成功</span></td>
                </tr>
            `;
            document.getElementById('recent-users').innerHTML = recentUsersHtml;
            
            // 照片墙模拟数据
            loadMockPhotoWallData();
        }
        
        // 照片墙模拟数据加载函数
        function loadMockPhotoWallData() {
            // 模拟照片墙数据
            const samplePhotos = [];
            for (let i = 1; i <= 30; i++) {
                samplePhotos.push({
                    id: `sample_${i}`,
                    url: `https://picsum.photos/800/600?random=sample_${i}`,
                    thumbnail: `https://picsum.photos/200/200?random=sample_${i}`,
                    filename: `sample_image_${i}.jpg`,
                    size: `${Math.floor(Math.random() * 5) + 1}.${Math.floor(Math.random() * 100).toString().padStart(2, '0')} MB`,
                    created: new Date().toISOString()
                });
            }
            
            // 保存到localStorage
            localStorage.setItem('photoWall', JSON.stringify(samplePhotos));
            
            // 更新照片墙显示
            updatePhotoWallDisplay();
        }
        
        // 更新照片墙显示
        function updatePhotoWallDisplay() {
            // 从localStorage获取照片墙数据
            const photoWallData = JSON.parse(localStorage.getItem('photoWall') || '[]');
            const photoGrid = document.getElementById('photo-grid');
            const photoCount = document.getElementById('photo-count');
            const selectedPhotoCount = document.getElementById('selected-photo-count');
            const batchDeleteBtn = document.getElementById('batch-delete-photos');
            const clearPhotoWallBtn = document.getElementById('clear-photo-wall');
            
            // 更新照片数量
            photoCount.textContent = `${photoWallData.length} 张图片`;
            selectedPhotoCount.textContent = `(0 / ${photoWallData.length})`;
            
            // 更新按钮状态
            batchDeleteBtn.disabled = photoWallData.length === 0;
            clearPhotoWallBtn.disabled = photoWallData.length === 0;
            
            // 如果没有照片，显示空状态
            if (photoWallData.length === 0) {
                photoGrid.innerHTML = `
                    <div class="col-span-full text-center py-12 text-gray-500 dark:text-gray-400">
                        <i class="fa fa-picture-o text-4xl mb-3"></i>
                        <h3 class="text-lg font-semibold mb-2">照片墙为空</h3>
                        <p>从结果管理页面选择图片添加到照片墙</p>
                    </div>
                `;
                document.getElementById('photo-pagination').style.display = 'none';
                return;
            }
            
            // 显示分页控件
            document.getElementById('photo-pagination').style.display = 'flex';
            
            // 生成照片墙HTML
            let photoHtml = '';
            photoWallData.forEach(photo => {
                photoHtml += `
                    <div class="relative group">
                        <!-- 图片卡片 -->
                        <div class="bg-white dark:bg-gray-800 rounded-lg overflow-hidden shadow-md hover:shadow-lg transition-all">
                            <div class="relative aspect-square overflow-hidden">
                                <img src="${photo.thumbnail}" alt="${photo.filename}" class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110">
                                
                                <!-- 选择复选框 -->
                                <div class="absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity">
                                    <input type="checkbox" class="photo-checkbox rounded text-primary focus:ring-primary/50" data-photo-id="${photo.id}">
                                </div>
                                
                                <!-- 图片信息 -->
                                <div class="absolute inset-0 bg-black/60 opacity-0 group-hover:opacity-100 transition-opacity flex items-end">
                                    <div class="p-3 w-full">
                                        <p class="text-white text-sm truncate">${photo.filename}</p>
                                        <p class="text-gray-300 text-xs">${photo.size}</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            photoGrid.innerHTML = photoHtml;
            
            // 绑定照片复选框事件
            bindPhotoCheckboxEvents();
        }
        
        // 绑定照片复选框事件
        function bindPhotoCheckboxEvents() {
            const checkboxes = document.querySelectorAll('.photo-checkbox');
            const selectAllCheckbox = document.getElementById('select-all-photos');
            const selectedPhotoCount = document.getElementById('selected-photo-count');
            const batchDeleteBtn = document.getElementById('batch-delete-photos');
            
            // 单个复选框事件
            checkboxes.forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    updateSelectedPhotoCount();
                });
            });
            
            // 全选复选框事件
            selectAllCheckbox.addEventListener('change', function() {
                const isChecked = this.checked;
                checkboxes.forEach(checkbox => {
                    checkbox.checked = isChecked;
                });
                updateSelectedPhotoCount();
            });
        }
        
        // 更新选中照片数量
        function updateSelectedPhotoCount() {
            const checkboxes = document.querySelectorAll('.photo-checkbox');
            const selectedCheckboxes = document.querySelectorAll('.photo-checkbox:checked');
            const selectedPhotoCount = document.getElementById('selected-photo-count');
            const batchDeleteBtn = document.getElementById('batch-delete-photos');
            
            const total = checkboxes.length;
            const selected = selectedCheckboxes.length;
            
            selectedPhotoCount.textContent = `(${selected} / ${total})`;
            batchDeleteBtn.innerHTML = `<i class="fa fa-trash mr-2"></i>删除 (${selected})`;
            batchDeleteBtn.disabled = selected === 0;
            
            // 更新全选复选框状态
            document.getElementById('select-all-photos').checked = selected === total && total > 0;
        }
        
        // 照片墙控制栏切换
        document.getElementById('toggle-photo-controls').addEventListener('click', function() {
            const controls = document.getElementById('photo-controls');
            controls.classList.toggle('hidden');
        });
        
        // 布局模式切换
        document.getElementById('layout-grid').addEventListener('click', function() {
            const photoGrid = document.getElementById('photo-grid');
            photoGrid.className = 'grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4';
            
            // 更新按钮样式
            this.classList.add('bg-primary', 'text-white');
            this.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
            document.getElementById('layout-masonry').classList.remove('bg-primary', 'text-white');
            document.getElementById('layout-masonry').classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
        });
        
        document.getElementById('layout-masonry').addEventListener('click', function() {
            const photoGrid = document.getElementById('photo-grid');
            photoGrid.className = 'columns-2 sm:columns-3 md:columns-4 lg:columns-5 gap-4';
            
            // 更新按钮样式
            this.classList.add('bg-primary', 'text-white');
            this.classList.remove('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
            document.getElementById('layout-grid').classList.remove('bg-primary', 'text-white');
            document.getElementById('layout-grid').classList.add('bg-gray-200', 'dark:bg-gray-700', 'text-gray-800', 'dark:text-gray-200');
        });
        
        // 批量删除照片
        document.getElementById('batch-delete-photos').addEventListener('click', function() {
            const selectedCheckboxes = document.querySelectorAll('.photo-checkbox:checked');
            if (selectedCheckboxes.length === 0) {
                alert('请先选择要删除的图片');
                return;
            }
            
            if (confirm(`确定要删除选中的 ${selectedCheckboxes.length} 张图片吗？`)) {
                // 获取选中的照片ID
                const selectedIds = Array.from(selectedCheckboxes).map(checkbox => checkbox.dataset.photoId);
                
                // 从localStorage获取照片墙数据
                const photoWallData = JSON.parse(localStorage.getItem('photoWall') || '[]');
                
                // 删除选中的照片
                const updatedPhotoWall = photoWallData.filter(photo => !selectedIds.includes(photo.id));
                
                // 保存到localStorage
                localStorage.setItem('photoWall', JSON.stringify(updatedPhotoWall));
                
                // 更新照片墙显示
                updatePhotoWallDisplay();
            }
        });
        
        // 清空照片墙
        document.getElementById('clear-photo-wall').addEventListener('click', function() {
            if (confirm('确定要清空整个照片墙吗？此操作不可恢复。')) {
                // 清空localStorage
                localStorage.removeItem('photoWall');
                
                // 更新照片墙显示
                updatePhotoWallDisplay();
            }
        });
        
        // 每页显示数量变化
        document.getElementById('photo-page-size').addEventListener('change', function() {
            // 这里可以添加分页逻辑
            console.log('每页显示数量变化为:', this.value);
        });

        // 页面加载时调用模拟数据加载函数
        document.addEventListener('DOMContentLoaded', function() {
            loadMockData();
            
            // 默认只显示SQLite
            const mysqlConfig = document.getElementById('mysql-config');
            const mongodbConfig = document.getElementById('mongodb-config');
            mysqlConfig.style.display = 'none';
            mongodbConfig.style.display = 'none';
        });

        // 数据库单选按钮事件处理
        document.querySelectorAll('input[name="database"]').forEach(radio => {
            radio.addEventListener('change', function() {
                // 根据选择的数据库类型更新配置显示
                const mysqlConfig = document.getElementById('mysql-config');
                const mongodbConfig = document.getElementById('mongodb-config');
                
                if (this.id === 'db-mysql') {
                    mysqlConfig.style.display = 'block';
                    mongodbConfig.style.display = 'none';
                    document.getElementById('enable-mysql').checked = true;
                } else if (this.id === 'db-mongodb') {
                    mysqlConfig.style.display = 'none';
                    mongodbConfig.style.display = 'block';
                    document.getElementById('enable-mongodb').checked = true;
                } else {
                    mysqlConfig.style.display = 'none';
                    mongodbConfig.style.display = 'none';
                }
            });
        });
        
        // 结果管理刷新按钮点击事件
        document.getElementById('refresh-results').addEventListener('click', function() {
            // 模拟刷新结果列表
            console.log('刷新结果列表');
            
            // 更新结果列表的模拟数据
            const resultsTable = document.getElementById('results-table');
            const mockResults = [
                {
                    user: '迪丽热巴',
                    weiboCount: 128,
                    fileCount: 36,
                    lastUpdate: '2023-08-21 15:30',
                    status: '成功'
                },
                {
                    user: '郭碧婷',
                    weiboCount: 85,
                    fileCount: 24,
                    lastUpdate: '2023-08-21 14:15',
                    status: '成功'
                },
                {
                    user: '杨幂',
                    weiboCount: 156,
                    fileCount: 56,
                    lastUpdate: '2023-08-21 12:45',
                    status: '成功'
                },
                {
                    user: '赵丽颖',
                    weiboCount: 98,
                    fileCount: 42,
                    lastUpdate: '2023-08-21 11:20',
                    status: '成功'
                },
                {
                    user: 'Angelababy',
                    weiboCount: 145,
                    fileCount: 48,
                    lastUpdate: '2023-08-21 10:15',
                    status: '成功'
                }
            ];
            
            // 生成结果列表HTML
            let resultsHtml = '';
            mockResults.forEach(result => {
                resultsHtml += `
                    <tr class="border-b border-gray-200 dark:border-gray-700">
                        <td class="py-3 px-4"><div class="flex items-center"><div class="w-6 h-6 rounded-full bg-blue-100 dark:bg-blue-900/50 flex items-center justify-center mr-2"><i class="fa fa-user text-blue-500"></i></div> ${result.user}</div></td>
                        <td class="py-3 px-4">${result.weiboCount}</td>
                        <td class="py-3 px-4">${result.fileCount}</td>
                        <td class="py-3 px-4">${result.lastUpdate}</td>
                        <td class="py-3 px-4">
                            <button class="px-3 py-1 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors text-sm mr-2">
                                <i class="fa fa-folder-open mr-1"></i>文件
                            </button>
                            <button class="px-3 py-1 bg-success text-white rounded-lg hover:bg-success/90 transition-colors text-sm mr-2">
                                <i class="fa fa-picture-o mr-1"></i>图片
                            </button>
                            <button class="px-3 py-1 bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 rounded-lg hover:bg-gray-300 dark:hover:bg-gray-600 transition-colors text-sm">
                                <i class="fa fa-download mr-1"></i>下载
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            resultsTable.innerHTML = resultsHtml;
        });
    </script>
    <!-- Cookie获取步骤弹窗 -->
    <div id="cookie-steps-modal" class="fixed inset-0 bg-black/50 z-50 flex items-center justify-center" style="display: none;">
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-lg w-full max-w-2xl max-h-[90vh] overflow-hidden">
            <div class="p-4 border-b border-gray-200 dark:border-gray-700 flex justify-between items-center">
                <h3 class="text-lg font-semibold">微博Cookie获取步骤</h3>
                <button id="close-cookie-steps" class="p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors" onclick="closeCookieStepsModal()">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="p-6 overflow-y-auto max-h-[calc(90vh-100px)]">
                <div class="prose dark:prose-invert max-w-none">
                    <h4 class="text-lg font-semibold mb-4">如何获取微博Cookie</h4>
                    <ol class="space-y-4">
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-3 mt-0.5">1</span>
                            <div>
                                <p class="font-medium">用Chrome打开微博登录页面</p>
                                <p class="text-gray-600 dark:text-gray-300">在浏览器中访问：<a href="https://passport.weibo.cn/signin/login" target="_blank" class="text-primary hover:underline">https://passport.weibo.cn/signin/login</a></p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-3 mt-0.5">2</span>
                            <div>
                                <p class="font-medium">输入微博的用户名、密码，登录</p>
                                <p class="text-gray-600 dark:text-gray-300">登录成功后会跳转到：<a href="https://m.weibo.cn" target="_blank" class="text-primary hover:underline">https://m.weibo.cn</a></p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-3 mt-0.5">3</span>
                            <div>
                                <p class="font-medium">打开Chrome开发者工具并访问weibo.cn</p>
                                <p class="text-gray-600 dark:text-gray-300">
                                    按F12键打开Chrome开发者工具，在地址栏输入并跳转到：<a href="https://weibo.cn" target="_blank" class="text-primary hover:underline">https://weibo.cn</a>
                                </p>
                            </div>
                        </li>
                        <li class="flex items-start">
                            <span class="flex-shrink-0 w-6 h-6 rounded-full bg-primary text-white flex items-center justify-center mr-3 mt-0.5">4</span>
                            <div>
                                <p class="font-medium">获取Cookie值</p>
                                <p class="text-gray-600 dark:text-gray-300">
                                    依此点击Chrome开发者工具中的：<br>
                                    <strong>Network</strong> → <strong>Name</strong>中的weibo.cn → <strong>Headers</strong> → <strong>Request Headers</strong><br>
                                    "Cookie:"后的值即为我们要找的cookie值，复制即可。
                                </p>
                            </div>
                        </li>
                    </ol>
                    <div class="mt-6 p-4 bg-blue-50 dark:bg-blue-900/30 rounded-lg">
                        <h5 class="font-medium text-blue-800 dark:text-blue-300">注意事项</h5>
                        <ul class="mt-2 space-y-2 text-blue-700 dark:text-blue-400">
                            <li class="flex items-start">
                                <i class="fa fa-info-circle mr-2 mt-1"></i>
                                <span>Cookie有效期一般为7天，请定期更新</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fa fa-info-circle mr-2 mt-1"></i>
                                <span>请勿将获取到的Cookie分享给他人，以免账号被盗</span>
                            </li>
                            <li class="flex items-start">
                                <i class="fa fa-info-circle mr-2 mt-1"></i>
                                <span>如果无法获取Cookie，请尝试清除浏览器缓存后重新登录</span>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Cookie获取步骤相关JavaScript -->
    <script>
        // 显示Cookie获取步骤弹窗
        function showCookieStepsModal() {
            document.getElementById('cookie-steps-modal').style.display = 'flex';
        }

        // 关闭Cookie获取步骤弹窗
        function closeCookieStepsModal() {
            document.getElementById('cookie-steps-modal').style.display = 'none';
        }
    </script>
</body>
</html>